webpackJsonp([17],{"2AnY":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),r=a.n(n),s=a("Xxa5"),i=a.n(s),l=a("exGp"),o=a.n(l),c=a("piLg"),u={name:"user",data:function(){return{serverData:[],serverPagination:{page:1,rowsNumber:0,rowsPerPage:10},columns:[{name:"name",required:!0,label:this.$t("Account Name"),align:"left",field:"name",sortable:!0},{name:"trueName",label:this.$t("Username"),field:"trueName",sortable:!0,align:"left"},{name:"email",label:this.$t("Email"),field:"email",sortable:!0,align:"left"},{name:"phone",label:this.$t("Phone"),field:"phone",sortable:!0,align:"left"},{name:"id",required:!0,label:this.$t("ID"),align:"left",field:"id"}],filter:{name:"",email:""},selected:[],loading:!1,editModal:!1,tempUser:{id:0,name:"",trueName:"",email:"",phone:""}}},methods:{request:function(e){var t=this;return o()(i.a.mark(function a(){var n,r,s,l,o,u,d,p;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.loading=!0,t.serverPagination=e.pagination,t.$refs.table,n=e.pagination,r=n.page,s=n.rowsPerPage,l=n.sortBy,o=n.descending,u={pageIndex:r,pageSize:s,sortBy:l,descending:o,filter:t.filter},a.next=6,Object(c.d)(u);case 6:d=a.sent,p=d.data.data,t.serverPagination.rowsNumber=p.totalCount,t.serverData=p.rows,setTimeout(function(){t.loading=!1},500);case 11:case"end":return a.stop()}},a,t)}))()},delUser:function(e){var t=this;return o()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$q.dialog({title:t.$t("Delete"),message:t.$t("Confirm the deletion？"),position:"right",ok:{push:!0,label:t.$t("Delete")},cancel:{push:!0,color:"negative",label:t.$t("Cancel")}});case 3:return a.next=5,Object(c.a)({id:e});case 5:t.$q.notify({type:"positive",message:t.$t("Successfully deleted"),position:"bottom-right"}),t.search(),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(0);case 11:case"end":return a.stop()}},a,t,[[0,9]])}))()},delUsers:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$q.dialog({title:e.$t("Batch deletion"),message:e.$t("Confirm the bulk delete operation？"),ok:{push:!0,label:e.$t("Delete")},cancel:{push:!0,color:"negative",label:e.$t("Cancel")}});case 3:return t.next=5,Object(c.b)({ids:r()(e.selected.map(function(e){return e.id}))});case 5:e.$q.notify({type:"positive",message:e.$t("Batch delete succeeded"),position:"bottom-right"}),e.selected=[],e.search(),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}},t,e,[[0,10]])}))()},editUser:function(e){var t=this.serverData.filter(function(t){return t.id===e});if(!(t&&t.length>0))return!0;this.tempUser=JSON.parse(r()(t[0])),this.editModal=!0},saveUser:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)(e.tempUser);case 2:e.$q.notify({type:"positive",message:e.$t("Saved successfully"),position:"bottom-right"}),e.editModal=!1,e.search();case 5:case"end":return t.stop()}},t,e)}))()},search:function(){this.request({pagination:this.serverPagination,filter:this.filter})},addUser:function(){this.tempUser={},this.editModal=!0}},mounted:function(){this.request({pagination:this.serverPagination,filter:this.filter})}},d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"10px"}},[a("q-card",{staticClass:"fit shadow-6",attrs:{inline:""}},[a("q-card-main",{staticStyle:{height:"80%"}},[a("q-table",{ref:"table",attrs:{color:"primary",data:e.serverData,columns:e.columns,selection:"multiple",selected:e.selected,"row-key":"id",pagination:e.serverPagination,loading:e.loading,"rows-per-page-label":e.$t("Rows per page"),"no-data-label":e.$t("No data")},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.serverPagination=t},request:e.request},scopedSlots:e._u([{key:"top-left",fn:function(t){return[a("q-input",{attrs:{type:"text",prefix:e.$t("Username")+"："},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}}),e._v("  \n                    "),a("q-input",{attrs:{type:"text",prefix:e.$t("Email")+"："},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}}),e._v("  \n                    "),a("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"search"},on:{click:e.search}},[e._v(e._s(e.$t("Search")))]),e._v("  \n                    "),a("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"add"},on:{click:e.addUser}},[e._v(e._s(e.$t("Add")))])]}},{key:"top-right",fn:function(e){return[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}})]}},{key:"top-selection",fn:function(t){return[a("q-btn",{attrs:{color:"negative",flat:"",round:"",delete:"",icon:"delete"},on:{click:e.delUsers}})]}},{key:"body-cell-id",fn:function(t){return a("q-td",{staticStyle:{width:"100px"},attrs:{props:t}},[a("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"edit",color:"primary"},on:{click:function(a){e.editUser(t.value)}}}),e._v(" "),a("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"delete",color:"red"},on:{click:function(a){e.delUser(t.value)}}})],1)}}])})],1)],1),e._v(" "),a("q-modal",{attrs:{"content-css":{minWidth:"400px",minHeight:"500px"}},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[a("q-modal-layout",[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"reply"},on:{click:function(t){e.editModal=!1}}}),e._v(" "),a("q-toolbar-title",[e._v("\n                    "+e._s(e.$t("Edit"))+"\n                ")])],1),e._v(" "),a("q-toolbar",{attrs:{slot:"footer"},slot:"footer"},[a("q-toolbar-title"),e._v(" "),a("q-btn",{attrs:{round:""},on:{click:e.saveUser}},[e._v(e._s(e.$t("Save")))]),e._v(" "),a("q-btn",{attrs:{round:"",color:"red"},on:{click:function(t){e.editModal=!1}}},[e._v(e._s(e.$t("Cancel")))])],1),e._v(" "),a("div",{staticClass:"layout-padding"},[a("q-field",{attrs:{count:15}},[a("q-input",{attrs:{"float-label":e.$t("Account Name")},model:{value:e.tempUser.name,callback:function(t){e.$set(e.tempUser,"name",t)},expression:"tempUser.name"}})],1),e._v(" "),a("q-field",{attrs:{count:15}},[a("q-input",{attrs:{"float-label":e.$t("Username")},model:{value:e.tempUser.trueName,callback:function(t){e.$set(e.tempUser,"trueName",t)},expression:"tempUser.trueName"}})],1),e._v(" "),a("q-field",{attrs:{count:15}},[a("q-input",{attrs:{"float-label":e.$t("Email")},model:{value:e.tempUser.email,callback:function(t){e.$set(e.tempUser,"email",t)},expression:"tempUser.email"}})],1),e._v(" "),a("q-field",{attrs:{count:15}},[a("q-input",{attrs:{"float-label":"Phone"},model:{value:e.tempUser.phone,callback:function(t){e.$set(e.tempUser,"phone",t)},expression:"tempUser.phone"}})],1)],1)],1)],1)],1)},p=[];d._withStripped=!0;var f=a("XyMi"),m=Object(f.a)(u,d,p,!1,null,null,null);m.options.__file="src\\pages\\user\\user.vue";t.default=m.exports},piLg:function(e,t,a){"use strict";t.d=function(e){return Object(n.a)({url:"/user/pagedlist",method:"get",params:e})},t.a=function(e){return Object(n.a)({url:"/user/del",method:"delete",params:e,loading:"hourglass"})},t.b=function(e){return Object(n.a)({url:"/user/batchdel",method:"delete",params:e,loading:"hourglass"})},t.e=function(e){return Object(n.a)({url:"/user/save",method:"post",data:e,loading:"hourglass"})},t.c=function(e){return Object(n.a)({url:"/user/editroleuser",method:"post",data:e,loading:"hourglass"})};var n=a("wY7H")}});