webpackJsonp([8],{Yt7b:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("Xxa5"),n=r.n(a),o=r("exGp"),s=r.n(o),i=r("piLg"),l=r("qSVB"),u={name:"userrole",data:function(){return{serverData:[],serverPagination:{page:1,rowsNumber:0,rowsPerPage:10},columns:[{name:"name",required:!0,label:this.$t("Account Name"),align:"left",field:"name",sortable:!0},{name:"trueName",label:this.$t("Username"),field:"trueName",sortable:!0,align:"left"},{name:"email",label:this.$t("Email"),field:"email",sortable:!0,align:"left"},{name:"phone",label:this.$t("Phone"),field:"phone",sortable:!0,align:"left"},{name:"id",required:!0,label:this.$t("ID"),align:"left",field:"id"}],filter:{name:"",email:""},loading:!1,editModal:!1,userId:"",userName:"",userRole:{serverData:[],serverPagination:{page:1,rowsNumber:0,rowsPerPage:10},columns:[{name:"name",required:!0,label:this.$t("Role name"),align:"left",field:"name"},{name:"code",label:this.$t("Role code"),field:"code",align:"left"},{name:"id",required:!0,label:this.$t("ID"),align:"left",field:"id"}],filter:{name:"",code:"",userId:""},loading:!1}}},methods:{request:function(e){var t=this;return s()(n.a.mark(function r(){var a,o,s,l,u,c,d,f;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=!0,t.serverPagination=e.pagination,t.$refs.table,a=e.pagination,o=a.page,s=a.rowsPerPage,l=a.sortBy,u=a.descending,c={pageIndex:o,pageSize:s,sortBy:l,descending:u,filter:t.filter},r.next=6,Object(i.d)(c);case 6:d=r.sent,f=d.data.data,t.serverPagination.rowsNumber=f.totalCount,t.serverData=f.rows,setTimeout(function(){t.loading=!1},500);case 11:case"end":return r.stop()}},r,t)}))()},editUserRole:function(e){this.userId=e.value,this.userName=e.row.name,this.userRole.filter={name:"",code:"",userId:e.value},this.editModal=!0,this.searchUserRole()},userRoleRequest:function(e){var t=this;return s()(n.a.mark(function r(){var a,o,s,i,u,c,d,f;return n.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t.userRole.loading=!0,t.userRole.serverPagination=e.pagination,t.$refs.table,a=e.pagination,o=a.page,s=a.rowsPerPage,i=a.sortBy,u=a.descending,c={pageIndex:o,pageSize:s,sortBy:i,descending:u,filter:t.userRole.filter},r.next=6,Object(l.c)(c);case 6:d=r.sent,f=d.data.data,t.userRole.serverPagination.rowsNumber=f.totalCount,t.userRole.serverData=f.rows,setTimeout(function(){t.userRole.loading=!1},500);case 11:case"end":return r.stop()}},r,t)}))()},search:function(){this.request({pagination:this.serverPagination,filter:this.filter})},searchUserRole:function(){this.userRoleRequest({pagination:this.userRole.serverPagination,filter:this.userRole.filter})},modifyUserRole:function(e,t){var r=this;return s()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.c)({roleId:e,userId:r.userId,action:t});case 2:1==t?r.$q.notify({type:"positive",message:r.$t("Added successfully"),position:"bottom-right"}):r.$q.notify({type:"positive",message:r.$t("Successfully removed"),position:"bottom-right"}),r.searchUserRole();case 4:case"end":return a.stop()}},a,r)}))()}},mounted:function(){this.request({pagination:this.serverPagination,filter:this.filter})}},c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{padding:"10px"}},[r("q-card",{staticClass:"fit shadow-6",attrs:{inline:""}},[r("q-card-main",{staticStyle:{height:"80%"}},[r("q-table",{ref:"table",attrs:{color:"primary",data:e.serverData,columns:e.columns,"row-key":"id",pagination:e.serverPagination,loading:e.loading,"rows-per-page-label":e.$t("Rows per page"),"no-data-label":e.$t("No data")},on:{"update:pagination":function(t){e.serverPagination=t},request:e.request},scopedSlots:e._u([{key:"top-left",fn:function(t){return[r("q-input",{attrs:{type:"text",prefix:e.$t("Username")+"："},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}}),e._v("  \n                    "),r("q-input",{attrs:{type:"text",prefix:e.$t("Email")+"："},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}}),e._v("  \n                    "),r("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"search"},on:{click:e.search}},[e._v(e._s(e.$t("Search")))]),e._v("  \n                ")]}},{key:"top-right",fn:function(e){return[r("q-btn",{attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}})]}},{key:"body-cell-id",fn:function(t){return r("q-td",{staticStyle:{width:"150px"},attrs:{props:t}},[r("q-btn",{attrs:{glossy:"",dense:"",color:"primary",icon:"edit",label:e.$t("Role list")},on:{click:function(r){e.editUserRole(t)}}})],1)}}])})],1)],1),e._v(" "),r("q-modal",{attrs:{maximized:""},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[r("q-modal-layout",[r("q-toolbar",{attrs:{slot:"header"},slot:"header"},[r("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"reply"},on:{click:function(t){e.editModal=!1}}}),e._v(" "),r("q-toolbar-title",[e._v("\n                  "+e._s(e.$t("Edit user"))+" \n                    "),r("q-chip",{attrs:{small:""}},[e._v(e._s(e.userName))]),e._v(" "+e._s(e.$t("List of roles"))+"\n                ")],1)],1),e._v(" "),r("div",{staticStyle:{padding:"20px"}},[r("q-table",{ref:"usertable",attrs:{color:"primary",data:e.userRole.serverData,columns:e.userRole.columns,"row-key":"id",pagination:e.userRole.serverPagination,loading:e.userRole.loading,"rows-per-page-label":e.$t("Rows per page"),"no-data-label":e.$t("No data")},on:{"update:pagination":function(t){e.$set(e.userRole,"serverPagination",t)},request:e.userRoleRequest},scopedSlots:e._u([{key:"top-left",fn:function(t){return[r("q-input",{attrs:{type:"text",prefix:e.$t("Role name")+"："},model:{value:e.userRole.filter.name,callback:function(t){e.$set(e.userRole.filter,"name",t)},expression:"userRole.filter.name"}}),e._v("  \n                        "),r("q-input",{attrs:{type:"text",prefix:e.$t("Role code")+"："},model:{value:e.userRole.filter.code,callback:function(t){e.$set(e.userRole.filter,"code",t)},expression:"userRole.filter.code"}}),e._v("  \n                        "),r("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"search"},on:{click:e.searchUserRole}},[e._v(e._s(e.$t("Search")))]),e._v("  \n                    ")]}},{key:"top-right",fn:function(e){return[r("q-btn",{attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}})]}},{key:"body-cell-id",fn:function(t){return r("q-td",{staticStyle:{width:"100px"},attrs:{props:t}},[2==t.row.isAdd?r("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"add",color:"primary"},on:{click:function(r){e.modifyUserRole(t.value,1)}}}):e._e(),e._v(" "),1==t.row.isAdd?r("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"delete",color:"red"},on:{click:function(r){e.modifyUserRole(t.value,0)}}}):e._e()],1)}}])})],1)],1)],1)],1)},d=[];c._withStripped=!0;var f=r("XyMi"),p=Object(f.a)(u,c,d,!1,null,null,null);p.options.__file="src\\pages\\permission\\userrole.vue";t.default=p.exports},piLg:function(e,t,r){"use strict";t.d=function(e){return Object(a.a)({url:"/user/pagedlist",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/user/del",method:"delete",params:e,loading:"hourglass"})},t.b=function(e){return Object(a.a)({url:"/user/batchdel",method:"delete",params:e,loading:"hourglass"})},t.e=function(e){return Object(a.a)({url:"/user/save",method:"post",data:e,loading:"hourglass"})},t.c=function(e){return Object(a.a)({url:"/user/editroleuser",method:"post",data:e,loading:"hourglass"})};var a=r("wY7H")},qSVB:function(e,t,r){"use strict";t.c=function(e){return Object(a.a)({url:"/role/pagedlist",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/role/del",method:"delete",params:e,loading:"hourglass"})},t.b=function(e){return Object(a.a)({url:"/role/batchdel",method:"delete",params:e,loading:"hourglass"})},t.e=function(e){return Object(a.a)({url:"/role/save",method:"post",data:e,loading:"hourglass"})},t.d=function(e){return Object(a.a)({url:"/role/savepermission",method:"post",data:e,loading:"hourglass"})};var a=r("wY7H")}});