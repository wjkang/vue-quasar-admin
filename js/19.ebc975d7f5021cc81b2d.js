webpackJsonp([19],{qSVB:function(e,t,n){"use strict";t.c=function(e){return Object(a.a)({url:"/role/pagedlist",method:"get",params:e})},t.a=function(e){return Object(a.a)({url:"/role/del",method:"delete",params:e,loading:"hourglass"})},t.b=function(e){return Object(a.a)({url:"/role/batchdel",method:"delete",params:e,loading:"hourglass"})},t.e=function(e){return Object(a.a)({url:"/role/save",method:"post",data:e,loading:"hourglass"})},t.d=function(e){return Object(a.a)({url:"/role/savepermission",method:"post",data:e,loading:"hourglass"})};var a=n("wY7H")},utgc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),o=n.n(a),r=n("Xxa5"),l=n.n(r),i=n("exGp"),s=n.n(i),c=n("qSVB"),d={name:"role",data:function(){return{serverData:[],serverPagination:{page:1,rowsNumber:0,rowsPerPage:10},columns:[{name:"name",required:!0,label:this.$t("Role name"),align:"left",field:"name",sortable:!0},{name:"code",label:this.$t("Role code"),field:"code",sortable:!0,align:"left"},{name:"id",required:!0,label:this.$t("ID"),align:"left",field:"id"}],filter:{name:"",code:""},selected:[],loading:!1,editModal:!1,tempRole:{id:0,name:"",code:"",description:""}}},methods:{request:function(e){var t=this;return s()(l.a.mark(function n(){var a,o,r,i,s,d,u,p;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,t.serverPagination=e.pagination,t.$refs.table,a=e.pagination,o=a.page,r=a.rowsPerPage,i=a.sortBy,s=a.descending,d={pageIndex:o,pageSize:r,sortBy:i,descending:s,filter:t.filter},n.next=6,Object(c.c)(d);case 6:u=n.sent,p=u.data.data,t.serverPagination.rowsNumber=p.totalCount,t.serverData=p.rows,setTimeout(function(){t.loading=!1},500);case 11:case"end":return n.stop()}},n,t)}))()},delRole:function(e){var t=this;return s()(l.a.mark(function n(){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.$q.dialog({title:t.$t("Delete"),message:t.$t("Confirm the deletion？"),position:"right",ok:{push:!0,label:t.$t("Delete")},cancel:{push:!0,color:"negative",label:t.$t("Cancel")}});case 3:return n.next=5,Object(c.a)({id:e});case 5:t.$q.notify({type:"positive",message:t.$t("Successfully deleted"),position:"bottom-right"}),t.search(),n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}},n,t,[[0,9]])}))()},delRoles:function(){var e=this;return s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$q.dialog({title:e.$t("Batch deletion"),message:e.$t("Confirm the bulk delete operation？"),ok:{push:!0,label:e.$t("Delete")},cancel:{push:!0,color:"negative",label:e.$t("Cancel")}});case 3:return t.next=5,Object(c.b)({ids:o()(e.selected.map(function(e){return e.id}))});case 5:e.$q.notify({type:"positive",message:e.$t("Successfully deleted"),position:"bottom-right"}),e.selected=[],e.search(),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(0);case 12:case"end":return t.stop()}},t,e,[[0,10]])}))()},editRole:function(e){var t=this.serverData.filter(function(t){return t.id===e});if(!(t&&t.length>0))return!0;this.tempRole=JSON.parse(o()(t[0])),this.editModal=!0},saveRole:function(){var e=this;return s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.e)(e.tempRole);case 2:e.$q.notify({type:"positive",message:e.$t("Saved successfully"),position:"bottom-right"}),e.editModal=!1,e.search();case 5:case"end":return t.stop()}},t,e)}))()},search:function(){this.request({pagination:this.serverPagination,filter:this.filter})},addRole:function(){this.tempRole={},this.editModal=!0}},mounted:function(){this.request({pagination:this.serverPagination,filter:this.filter})}},u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"10px"}},[n("q-card",{staticClass:"fit shadow-6",attrs:{inline:""}},[n("q-card-main",{staticStyle:{height:"80%"}},[n("q-table",{ref:"table",attrs:{color:"primary",data:e.serverData,columns:e.columns,selection:"multiple",selected:e.selected,"row-key":"id",pagination:e.serverPagination,loading:e.loading,"rows-per-page-label":e.$t("Rows per page"),"no-data-label":e.$t("No data")},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.serverPagination=t},request:e.request},scopedSlots:e._u([{key:"top-left",fn:function(t){return[n("q-input",{attrs:{type:"text",prefix:e.$t("Role name")+"："},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}}),e._v("  \n                    "),n("q-input",{attrs:{type:"text",prefix:e.$t("Role code")+"："},model:{value:e.filter.code,callback:function(t){e.$set(e.filter,"code",t)},expression:"filter.code"}}),e._v("  \n                    "),n("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"search"},on:{click:e.search}},[e._v(e._s(e.$t("Search")))]),e._v("  \n                    "),n("q-btn",{attrs:{push:"",dense:"",color:"primary",icon:"add"},on:{click:e.addRole}},[e._v(e._s(e.$t("Add")))])]}},{key:"top-right",fn:function(e){return[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:e.toggleFullscreen}})]}},{key:"top-selection",fn:function(t){return[n("q-btn",{attrs:{color:"negative",flat:"",round:"",delete:"",icon:"delete"},on:{click:e.delRoles}})]}},{key:"body-cell-id",fn:function(t){return n("q-td",{staticStyle:{width:"100px"},attrs:{props:t}},[n("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"edit",color:"primary"},on:{click:function(n){e.editRole(t.value)}}}),e._v(" "),n("q-btn",{attrs:{small:"",round:"",push:"",glossy:"",dense:"",icon:"delete",color:"red"},on:{click:function(n){e.delRole(t.value)}}})],1)}}])})],1)],1),e._v(" "),n("q-modal",{attrs:{maximized:""},model:{value:e.editModal,callback:function(t){e.editModal=t},expression:"editModal"}},[n("q-modal-layout",[n("q-toolbar",{attrs:{slot:"header"},slot:"header"},[n("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"reply"},on:{click:function(t){e.editModal=!1}}}),e._v(" "),n("q-toolbar-title",[e._v("\n                    "+e._s(e.$t("Edit"))+"\n                ")])],1),e._v(" "),n("q-toolbar",{attrs:{slot:"footer"},slot:"footer"},[n("q-toolbar-title"),e._v(" "),n("q-btn",{attrs:{round:""},on:{click:e.saveRole}},[e._v(e._s(e.$t("Save")))]),e._v(" "),n("q-btn",{attrs:{round:"",color:"red"},on:{click:function(t){e.editModal=!1}}},[e._v(e._s(e.$t("Cancel")))])],1),e._v(" "),n("div",{staticClass:"layout-padding"},[n("q-field",{attrs:{count:15}},[n("q-input",{attrs:{"float-label":e.$t("Role name")},model:{value:e.tempRole.name,callback:function(t){e.$set(e.tempRole,"name",t)},expression:"tempRole.name"}})],1),e._v(" "),n("q-field",{attrs:{count:15}},[n("q-input",{attrs:{"float-label":e.$t("Role code")},model:{value:e.tempRole.code,callback:function(t){e.$set(e.tempRole,"code",t)},expression:"tempRole.code"}})],1),e._v(" "),n("q-field",{attrs:{count:200}},[n("q-input",{attrs:{type:"textarea","max-height":100,rows:"7","float-label":e.$t("Role description")},model:{value:e.tempRole.description,callback:function(t){e.$set(e.tempRole,"description",t)},expression:"tempRole.description"}})],1)],1)],1)],1)],1)},p=[];u._withStripped=!0;var f=n("XyMi"),m=Object(f.a)(d,u,p,!1,null,null,null);m.options.__file="src\\pages\\permission\\role.vue";t.default=m.exports}});